---
interface GalleryImage {
  src: string;
  alt: string;
  caption?: string;
}

interface Props {
  images: GalleryImage[];
  columns?: 2 | 3 | 4;
  class?: string;
}

const {
  images,
  columns = 2,
  class: className = ''
} = Astro.props;

const gridClassMap = {
  2: 'grid-cols-1 md:grid-cols-2',
  3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',
  4: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-4'
};

const gridClass = gridClassMap[columns];
---

<div class:list={['my-8', className]}>
  <div class:list={['grid gap-4', gridClass]}>
    {images.map((image) => (
      <figure class="group">
        <div class="overflow-hidden rounded-md shadow-sm">
          <img
            src={image.src}
            alt={image.alt}
            width="400"
            height="300"
            class="w-full h-48 object-cover transition-transform duration-200 group-hover:scale-105"
            loading="lazy"
          />
        </div>
        {image.caption && (
          <figcaption class="mt-2 text-center text-sm text-gray-600 dark:text-gray-400 italic">
            {image.caption}
          </figcaption>
        )}
      </figure>
    ))}
  </div>
</div>
